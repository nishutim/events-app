"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[757],{3757:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(4165),s=n(5861),a=n(9439),c=n(2791),i=n(6756),o=n(7309),l=n(7892),u=n.n(l),d=n(8660),f=n(7033),v=n(2930),m=function(e){return function(){var t=(0,s.Z)((0,r.Z)().mark((function t(n){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{(s=JSON.parse(localStorage.getItem("events")||"[]")).push(e),localStorage.setItem("events",JSON.stringify(s)),n(f.D.createEventSuccess(e))}catch(r){alert(r.message)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=n(8285),p=function(e){return e.event.selectedDate},Z=function(e){return e.event.guests},x=function(e){return e.event.events},j=n(1668),g=n(8579),S=n(2622),C=(n(25),n(7228)),D=n(184),N=function(e){var t=e.authUser,n=e.events,r=e.onRemoveEvent,s=e.onSelect;return(0,D.jsx)(g.Z,{className:"eventPageCalendar",locale:C.Z,dateCellRender:function(e){var s=e.format("YYYY-MM-DD"),a=n.filter((function(e){return e.date===s}));return(0,D.jsx)("ul",{className:"eventsList",children:a.map((function(e){var n=t.id===e.authorId;return(0,D.jsxs)("li",{className:"eventsListItem",children:[(0,D.jsx)("span",{className:"eventsListText",children:e.description}),n&&(0,D.jsx)(S.Z,{className:"eventsListDeleteBtn",onClick:function(){return t=e.id,void r(t);var t}})]},e.id)}))})},onSelect:function(e){var t=e.format("YYYY-MM-DD");s(t)}})},M=n(4269),k=n(4611),Y=n(8588),b=n(4219),y=n(7098),I=n(3099),w=n(4086),E=n(4261),T=n(3144),F=n(5671),O=(0,T.Z)((function e(){(0,F.Z)(this,e)}));O.required=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This field is required!";return{required:!0,message:e}};var U=O,L=c.memo((function(e){var t=e.authUser,n=e.guests,i=e.selectedDate,l=e.closeModal,d=e.onSubmit,f=(0,w.Z)(),v=(0,a.Z)(f,1)[0],m=(0,c.useState)(!1),h=(0,a.Z)(m,2),p=h[0],Z=h[1],x=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var a,c,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.date,c=n.description,i=n.selectedGuests,Z(!0),o={id:(0,E.Z)(),authorId:"".concat(null===t||void 0===t?void 0:t.id)||"0",date:a.format("YYYY-MM-DD"),description:c,guestsId:i||[]},setTimeout((0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o);case 2:v.resetFields(),Z(!1);case 4:case"end":return e.stop()}}),e)}))),1e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){v.setFieldsValue({date:u()(i)})}),[i]),(0,D.jsxs)(k.Z,{className:"createEventForm",name:"eventForm",form:v,autoComplete:"off",onFinish:x,initialValues:{date:u()(i)},children:[(0,D.jsx)("h3",{className:"createEventFormHeader",children:"Create event"}),(0,D.jsx)(k.Z.Item,{shouldUpdate:!0,label:"Select event date",name:"date",rules:[U.required("Date is required!")],children:(0,D.jsx)(Y.Z,{locale:C.Z,className:"createEventDatePicker"})}),(0,D.jsx)(k.Z.Item,{label:"Add event description",name:"description",rules:[U.required()],children:(0,D.jsx)(b.Z,{placeholder:"Type your description here..."})}),(0,D.jsx)(k.Z.Item,{label:"Select guest",name:"selectedGuests",children:(0,D.jsx)(y.Z,{mode:"multiple",loading:!n,showArrow:!0,showSearch:!1,children:null===n||void 0===n?void 0:n.map((function(e){return(0,D.jsx)(y.Z.Option,{value:e.id,children:e.email},e.id)}))})}),(0,D.jsxs)(I.Z,{className:"createEventFormFooter",children:[(0,D.jsx)(o.Z,{size:"large",onClick:l,children:"Cancel"}),(0,D.jsx)(o.Z,{className:"createEventFormBtn",type:"primary",htmlType:"submit",size:"large",loading:p,children:"Create"})]})]})})),q=L,P=c.memo((function(e){var t=e.isModalOpen,n=e.closeModal,a=e.onSubmit,i=e.selectedDate,o=(0,d.C)(h.Pe),l=(0,d.C)(Z),u=(0,d.T)();return(0,c.useEffect)((function(){setTimeout((function(){return u(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.fetchUsers();case 3:s=e.sent,a=n().auth.user,c=s.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)})),t(f.D.fetchUsersSuccess(c)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}())}),1500)}),[]),(0,D.jsx)(M.Z,{open:t,centered:!0,closable:!1,footer:null,children:(0,D.jsx)(q,{authUser:o,guests:l,selectedDate:i,closeModal:n,onSubmit:a})})})),R=P,B=n(5796),J=function(e){var t=e.events,n=e.onSelect;return(0,D.jsx)(g.Z,{className:"eventCalendarMobile",locale:C.Z,dateCellRender:function(e){var n=e.format("YYYY-MM-DD");return t.filter((function(e){return e.date===n})).length>0?(0,D.jsxs)("div",{className:"eventCalendarMobileNotification",children:[(0,D.jsx)(B.Z,{className:"eventCalendartMobileIcon"}),(0,D.jsx)("p",{className:"eventCalendartMobileText",children:"Info!"})]}):(0,D.jsx)(D.Fragment,{})},onSelect:function(e){var t=e.format("YYYY-MM-DD");n(t)}})},z=function(e){var t=e.authUser,n=e.selectedDateEvents,r=e.isModalOpen,s=e.closeModal,a=e.onRemoveEvent,c=function(){s()};return(0,D.jsxs)(M.Z,{className:"eventsInfoModal",open:r,centered:!0,closable:!1,footer:null,onCancel:c,children:[(0,D.jsx)("h4",{className:"eventsInfoModalHeader",children:"Events that you have on this day:"}),n.length>0?(0,D.jsx)("ul",{className:"eventsList",children:n.map((function(e){var n=t.id===e.authorId;return(0,D.jsxs)("li",{className:"eventsListItem",children:[(0,D.jsx)("span",{className:"eventsListText",children:e.description}),n&&(0,D.jsx)(S.Z,{className:"eventsListDeleteBtn",onClick:function(){return t=e.id,void a(t);var t}})]},e.id)}))}):(0,D.jsx)("div",{className:"eventsInfoText",children:"You are not having any events on this day..."}),(0,D.jsx)(o.Z,{className:"eventsInfoModalBtn",onClick:c,children:"Cancel"})]})},A=function(){var e=(0,d.C)(h.Pe),t=(0,d.C)(p),n=(0,d.C)(x),l=(0,c.useState)(!1),v=(0,a.Z)(l,2),Z=v[0],g=v[1],S=(0,c.useState)(!1),C=(0,a.Z)(S,2),M=C[0],k=C[1],Y=(0,c.useState)(!0),b=(0,a.Z)(Y,2),y=b[0],I=b[1],w=(0,c.useState)([]),E=(0,a.Z)(w,2),T=E[0],F=E[1],O=(0,d.T)(),U=(0,c.useCallback)((function(){g(!1)}),[]),L=(0,c.useCallback)((function(){k(!1)}),[]),q=(0,c.useCallback)((function(e){O(function(e){return function(){var t=(0,s.Z)((0,r.Z)().mark((function t(n){var s,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{s=JSON.parse(localStorage.getItem("events")),a=s.filter((function(t){return t.id!==e})),localStorage.setItem("events",JSON.stringify(a)),n(f.D.removeEventSuccess(e))}catch(r){alert(r.message)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),F(T.filter((function(t){return t.id!==e})))}),[]),P=(0,c.useCallback)((function(e){O(f.D.setSelectedDate(e))}),[]),B=(0,c.useCallback)((function(e){var t=n.filter((function(t){return t.date===e}));F(t),k(!0)}),[n]),A=(0,c.useCallback)(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(m(t));case 2:g(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,c.useEffect)((function(){setTimeout((0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s=JSON.parse(localStorage.getItem("events")||"[]"),a=n().auth.user,c=s.filter((function(e){return e.authorId===a.id||e.guestsId.includes(a.id)})),t(f.D.fetchEventsSuccess(c))}catch(r){alert(r.message),t(f.D.fetchEventsSuccess([]))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:I(!1);case 3:case"end":return e.stop()}}),e)}))),1e3),P(u()().format("YYYY-MM-DD"))}),[]),(0,D.jsxs)(i.Z,{className:"eventPage",children:[(0,D.jsx)(o.Z,{className:"eventPageBtn",type:"primary",size:"large",loading:y,disabled:y,onClick:function(){g(!0)},children:"Create event"}),y?(0,D.jsx)(j.Z,{}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(N,{authUser:e,events:n,onRemoveEvent:q,onSelect:P}),(0,D.jsx)(J,{events:n,onSelect:B}),(0,D.jsx)(R,{isModalOpen:Z,closeModal:U,onSubmit:A,selectedDate:t}),(0,D.jsx)(z,{authUser:e,selectedDateEvents:T,isModalOpen:M,closeModal:L,onRemoveEvent:q})]})]})}}}]);
//# sourceMappingURL=757.8eb96ba6.chunk.js.map