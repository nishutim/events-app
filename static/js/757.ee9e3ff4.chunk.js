"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[757],{3757:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var r=n(4165),s=n(5861),a=n(9439),c=n(2791),i=n(6756),o=n(7309),u=n(8660),l=n(7033),d=n(2930),v=function(e){return function(){var t=(0,s.Z)((0,r.Z)().mark((function t(n){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{(s=JSON.parse(localStorage.getItem("events")||"[]")).push(e),localStorage.setItem("events",JSON.stringify(s)),n(l.D.createEventSuccess(e))}catch(r){alert(r.message)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=n(8285),m=function(e){return e.event.guests},h=function(e){return e.event.events},p=n(1668),Z=n(8579),x=n(2622),j=(n(25),n(7228)),g=n(184),C=function(e){var t=e.authUser,n=e.events,r=e.onRemoveEvent;return(0,g.jsx)(Z.Z,{className:"eventPageCalendar",locale:j.Z,dateCellRender:function(e){var s=e.format("YYYY-DD-MM"),a=n.filter((function(e){return e.date===s}));return(0,g.jsx)("ul",{className:"eventsList",children:a.map((function(e){var n=t.id===e.authorId;return(0,g.jsxs)("li",{className:"eventsListItem",children:[(0,g.jsx)("span",{className:"eventsListText",children:e.description}),n&&(0,g.jsx)(x.Z,{className:"eventsListDeleteBtn",onClick:function(){return t=e.id,void r(t);var t}})]},e.id)}))})}})},N=n(4269),S=n(4611),M=n(8588),k=n(4219),b=n(7098),y=n(3099),I=n(4086),w=n(7892),D=n.n(w),E=n(4261),Y=n(3144),T=n(5671),F=(0,Y.Z)((function e(){(0,T.Z)(this,e)}));F.required=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This field is required!";return{required:!0,message:e}};var O=F,L=c.memo((function(e){var t=e.authUser,n=e.guests,i=e.closeModal,u=e.onSubmit,l=(0,I.Z)(),d=(0,a.Z)(l,1)[0],v=(0,c.useState)(!1),f=(0,a.Z)(v,2),m=f[0],h=f[1],p=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var a,c,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.date,c=n.description,i=n.selectedGuests,h(!0),console.log(a,c,i),o={id:(0,E.Z)(),authorId:"".concat(null===t||void 0===t?void 0:t.id)||"0",date:a.format("YYYY-DD-MM"),description:c,guestsId:i},setTimeout((0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(o);case 2:d.resetFields(),h(!1);case 4:case"end":return e.stop()}}),e)}))),1e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)(S.Z,{className:"createEventForm",name:"eventForm",form:d,autoComplete:"off",onFinish:p,initialValues:{date:D()()},children:[(0,g.jsx)("h3",{className:"createEventFormHeader",children:"Create event"}),(0,g.jsx)(S.Z.Item,{label:"Select event date",name:"date",rules:[O.required("Date is required!")],children:(0,g.jsx)(M.Z,{locale:j.Z,className:"createEventDatePicker"})}),(0,g.jsx)(S.Z.Item,{label:"Add event description",name:"description",rules:[O.required()],children:(0,g.jsx)(k.Z,{placeholder:"Type your description here..."})}),(0,g.jsx)(S.Z.Item,{label:"Select guest",name:"selectedGuests",children:(0,g.jsx)(b.Z,{mode:"multiple",loading:!n,showArrow:!0,showSearch:!1,children:null===n||void 0===n?void 0:n.map((function(e){return(0,g.jsx)(b.Z.Option,{value:e.id,children:e.email},e.id)}))})}),(0,g.jsxs)(y.Z,{className:"createEventFormFooter",children:[(0,g.jsx)(o.Z,{size:"large",onClick:i,children:"Cancel"}),(0,g.jsx)(o.Z,{className:"createEventFormBtn",type:"primary",htmlType:"submit",size:"large",loading:m,children:"Create"})]})]})})),U=L,q=c.memo((function(e){var t=e.isModalOpen,n=e.closeModal,a=e.onSubmit,i=(0,u.C)(f.Pe),o=(0,u.C)(m),v=(0,u.T)();return(0,c.useEffect)((function(){setTimeout((function(){return v(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.fetchUsers();case 3:s=e.sent,a=n().auth.user,c=s.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)})),t(l.D.fetchUsersSuccess(c)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}())}),1500)}),[]),(0,g.jsx)(N.Z,{open:t,centered:!0,closable:!1,footer:null,children:(0,g.jsx)(U,{authUser:i,guests:o,closeModal:n,onSubmit:a})})})),P=q,R=n(5796),B=function(e){var t=e.events,n=e.onSelect;return(0,g.jsx)(Z.Z,{className:"eventCalendarMobile",locale:j.Z,dateCellRender:function(e){var n=e.format("YYYY-DD-MM");return t.filter((function(e){return e.date===n})).length>0?(0,g.jsxs)("div",{className:"eventCalendarMobileNotification",children:[(0,g.jsx)(R.Z,{className:"eventCalendartMobileIcon"}),(0,g.jsx)("p",{className:"eventCalendartMobileText",children:"Info!"})]}):(0,g.jsx)(g.Fragment,{})},onSelect:function(e){var t=e.format("YYYY-DD-MM");n(t)}})},J=function(e){var t=e.authUser,n=e.selectedDateEvents,r=e.isModalOpen,s=e.closeModal,a=e.onRemoveEvent,c=function(){s()};return(0,g.jsxs)(N.Z,{className:"eventsInfoModal",open:r,centered:!0,closable:!1,footer:null,onCancel:c,children:[(0,g.jsx)("h4",{className:"eventsInfoModalHeader",children:"Events that you have on this day:"}),n.length>0?(0,g.jsx)("ul",{className:"eventsList",children:n.map((function(e){var n=t.id===e.authorId;return(0,g.jsxs)("li",{className:"eventsListItem",children:[(0,g.jsx)("span",{className:"eventsListText",children:e.description}),n&&(0,g.jsx)(x.Z,{className:"eventsListDeleteBtn",onClick:function(){return t=e.id,void a(t);var t}})]},e.id)}))}):(0,g.jsx)("div",{className:"eventsInfoText",children:"You are not having any events on this day..."}),(0,g.jsx)(o.Z,{className:"eventsInfoModalBtn",onClick:c,children:"Cancel"})]})},z=function(){var e=(0,u.C)(f.Pe),t=(0,u.C)(h),n=(0,c.useState)(!1),d=(0,a.Z)(n,2),m=d[0],Z=d[1],x=(0,c.useState)(!1),j=(0,a.Z)(x,2),N=j[0],S=j[1],M=(0,c.useState)(!0),k=(0,a.Z)(M,2),b=k[0],y=k[1],I=(0,c.useState)([]),w=(0,a.Z)(I,2),D=w[0],E=w[1],Y=(0,u.T)();(0,c.useEffect)((function(){setTimeout((0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s=JSON.parse(localStorage.getItem("events")||"[]"),a=n().auth.user,c=s.filter((function(e){return e.authorId===a.id||e.guestsId.includes(a.id)})),t(l.D.fetchEventsSuccess(c))}catch(r){alert(r.message),t(l.D.fetchEventsSuccess([]))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:y(!1);case 3:case"end":return e.stop()}}),e)}))),1e3)}),[]);var T=(0,c.useCallback)((function(){Z(!1)}),[]),F=(0,c.useCallback)((function(){S(!1)}),[]),O=(0,c.useCallback)((function(e){Y(function(e){return function(){var t=(0,s.Z)((0,r.Z)().mark((function t(n){var s,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{s=JSON.parse(localStorage.getItem("events")),a=s.filter((function(t){return t.id!==e})),localStorage.setItem("events",JSON.stringify(a)),n(l.D.removeEventSuccess(e))}catch(r){alert(r.message)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),E(D.filter((function(t){return t.id!==e})))}),[]),L=(0,c.useCallback)((function(e){var n=t.filter((function(t){return t.date===e}));E(n),S(!0)}),[t]),U=(0,c.useCallback)(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(v(t));case 2:Z(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,g.jsxs)(i.Z,{className:"eventPage",children:[(0,g.jsx)(o.Z,{className:"eventPageBtn",type:"primary",size:"large",loading:b,disabled:b,onClick:function(){Z(!0)},children:"Create event"}),b?(0,g.jsx)(p.Z,{}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(C,{authUser:e,events:t,onRemoveEvent:O}),(0,g.jsx)(B,{events:t,onSelect:L})]}),(0,g.jsx)(P,{isModalOpen:m,closeModal:T,onSubmit:U}),(0,g.jsx)(J,{authUser:e,selectedDateEvents:D,isModalOpen:N,closeModal:F,onRemoveEvent:O})]})}}}]);
//# sourceMappingURL=757.ee9e3ff4.chunk.js.map