"use strict";(self.webpackChunkevents_app=self.webpackChunkevents_app||[]).push([[753],{3753:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var r=n(4165),s=n(5861),a=n(9439),c=n(2791),i=n(6756),u=n(7309),o=n(8660),l=n(7033),d=n(2930),f=function(e){return function(){var t=(0,s.Z)((0,r.Z)().mark((function t(n){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{(s=JSON.parse(localStorage.getItem("events")||"[]")).push(e),localStorage.setItem("events",JSON.stringify(s)),n(l.D.createEventSuccess(e))}catch(r){alert(r.message)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=n(8285),p=function(e){return e.event.guests},m=function(e){return e.event.events},h=n(1668),Z=n(8579),x=n(2622),g=n(184),S=function(e){var t=e.authUser,n=e.events,r=e.onRemoveEvent;return(0,g.jsx)(Z.Z,{className:"eventPageCalendar",dateCellRender:function(e){var s=e.format("YYYY-DD-MM"),a=n.filter((function(e){return e.date===s}));return(0,g.jsx)("ul",{className:"eventsList",children:a.map((function(e){var n=t.id===e.authorId;return(0,g.jsxs)("li",{className:"eventsListItem",children:[(0,g.jsx)("span",{className:"eventsListText",children:e.description}),n&&(0,g.jsx)(x.Z,{className:"eventsListDeleteBtn",onClick:function(){return t=e.id,void r(t);var t}})]},e.id)}))})}})},j=n(4269),w=n(4611),k=n(8588),C=n(4219),y=n(7098),N=n(3099),b=n(7892),I=n.n(b),E=n(4261),D=n(3144),M=n(5671),T=(0,D.Z)((function e(){(0,M.Z)(this,e)}));T.required=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This field is required!";return{required:!0,message:e}};var F=T,O=n(4086),Y=c.memo((function(e){var t=e.authUser,n=e.guests,i=e.closeModal,o=e.onSubmit,l=(0,O.Z)(),d=(0,a.Z)(l,1)[0],f=(0,c.useState)(!1),v=(0,a.Z)(f,2),p=v[0],m=v[1],h=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var a,c,i,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.date,c=n.description,i=n.selectedGuests,m(!0),u={id:(0,E.Z)(),authorId:"".concat(null===t||void 0===t?void 0:t.id)||"0",date:a.format("YYYY-DD-MM"),description:c,guestsId:i},setTimeout((0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(u);case 2:d.resetFields(),m(!1);case 4:case"end":return e.stop()}}),e)}))),1e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)(w.Z,{className:"createEventForm",name:"eventForm",form:d,autoComplete:"off",onFinish:h,initialValues:{date:I()()},children:[(0,g.jsx)("h3",{className:"createEventFormHeader",children:"Create event"}),(0,g.jsx)(w.Z.Item,{label:"Select event date",name:"date",rules:[F.required("Date is required!")],children:(0,g.jsx)(k.Z,{className:"createEventDatePicker"})}),(0,g.jsx)(w.Z.Item,{label:"Add event description",name:"description",rules:[F.required()],children:(0,g.jsx)(C.Z,{placeholder:"Type your description here..."})}),(0,g.jsx)(w.Z.Item,{label:"Select guest",name:"selectedGuests",children:(0,g.jsx)(y.Z,{mode:"multiple",loading:!n,showArrow:!0,showSearch:!1,children:null===n||void 0===n?void 0:n.map((function(e){return(0,g.jsx)(y.Z.Option,{value:e.id,children:e.email},e.id)}))})}),(0,g.jsxs)(N.Z,{className:"createEventFormFooter",children:[(0,g.jsx)(u.Z,{size:"large",onClick:i,children:"Cancel"}),(0,g.jsx)(u.Z,{className:"createEventFormBtn",type:"primary",htmlType:"submit",size:"large",loading:p,children:"Create"})]})]})})),q=Y,P=c.memo((function(e){var t=e.isModalOpen,n=e.closeModal,a=e.onSubmit,i=(0,o.C)(v.Pe),u=(0,o.C)(p),f=(0,o.T)();return(0,c.useEffect)((function(){setTimeout((function(){return f(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.fetchUsers();case 3:s=e.sent,a=n().auth.user,c=s.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)})),t(l.D.fetchUsersSuccess(c)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}())}),1500)}),[]),(0,g.jsx)(j.Z,{open:t,centered:!0,closable:!1,footer:null,children:(0,g.jsx)(q,{authUser:i,guests:u,closeModal:n,onSubmit:a})})})),U=P,J=function(){var e=(0,o.C)(v.Pe),t=(0,o.C)(m),n=(0,c.useState)(!1),d=(0,a.Z)(n,2),p=d[0],Z=d[1],x=(0,c.useState)(!0),j=(0,a.Z)(x,2),w=j[0],k=j[1],C=(0,o.T)();(0,c.useEffect)((function(){setTimeout((0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s=JSON.parse(localStorage.getItem("events")||"[]"),a=n().auth.user,c=s.filter((function(e){return e.authorId===a.id||e.guestsId.includes(a.id)})),t(l.D.fetchEventsSuccess(c))}catch(r){alert(r.message),t(l.D.fetchEventsSuccess([]))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:k(!1);case 3:case"end":return e.stop()}}),e)}))),1e3)}),[]);var y=(0,c.useCallback)((function(){Z(!1)}),[]),N=(0,c.useCallback)((function(e){C(function(e){return function(){var t=(0,s.Z)((0,r.Z)().mark((function t(n){var s,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{s=JSON.parse(localStorage.getItem("events")),a=s.filter((function(t){return t.id!==e})),localStorage.setItem("events",JSON.stringify(a)),n(l.D.removeEventSuccess(e))}catch(r){alert(r.message)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}),[]),b=(0,c.useCallback)(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(f(t));case 2:Z(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,g.jsxs)(i.Z,{className:"eventPage",children:[w?(0,g.jsx)(h.Z,{}):(0,g.jsx)(S,{authUser:e,events:t,onRemoveEvent:N}),(0,g.jsx)(u.Z,{className:"eventPageBtn",type:"primary",size:"large",loading:w,disabled:w,onClick:function(){Z(!0)},children:"Create event"}),(0,g.jsx)(U,{isModalOpen:p,closeModal:y,onSubmit:b})]})}}}]);
//# sourceMappingURL=753.a7683253.chunk.js.map